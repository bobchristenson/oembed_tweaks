Honestly, unless you understand what this code is doing
and how to make it actually work, this will probably just
frustrate you.

This is not intended as a plug-and-play module. You must
customize it and there's no UI.  There's not even proper
checks to ensure the modules who's functions we're using
even exist.  So make sure you have media.module and 
oembed.module (along with it's patch at http://drupal.org/node/1539632)
installed and functional.

I make no promises, but hopefully it helps you build
something cool.